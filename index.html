<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Centro de Apps – Convención 2025</title>
  <style>
    :root{
      --bg:#f7f8fb; --fg:#111; --muted:#666; --card:#fff; --border:#e8e8e8;
      --btn:#111; --btnfg:#fff; --btnborder:#111; --shadow:0 6px 20px rgba(0,0,0,.05);
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,Arial,sans-serif; margin:24px; background:var(--bg); color:var(--fg)}
    h1{margin:0 0 8px}
    p.muted{color:var(--muted);margin:0 0 8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-top:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    .card h3{margin:0 0 8px}
    .btns{display:flex;gap:8px;flex-wrap:wrap}
    .btn{padding:10px 12px;border:1px solid #ccc;border-radius:10px;background:#fff;cursor:pointer}
    .btn.primary{background:var(--btn);color:var(--btnfg);border-color:var(--btnborder);text-decoration:none;display:inline-block}
    .small{font-size:.9em;color:var(--muted);margin-top:6px}
    dialog{border:none;border-radius:12px;padding:0;box-shadow:0 20px 50px rgba(0,0,0,.2)}
    .modal{padding:16px 16px 0;background:#fff;border-radius:12px}
    .modal h4{margin:0 0 12px}
    .qrbox{display:flex;justify-content:center;padding:12px}
    .actions{display:flex;justify-content:flex-end;gap:8px;padding:12px 16px 16px}
  </style>
</head>
<body>
  <h1>Centro de Apps | Fundación Marta y María</h1>
  <p class="muted">Acceso rápido a Inscripción, Registro de Ingreso (día del evento) y Tablero de control.</p>

  <div class="grid">
    <!-- Inscripción -->
    <div class="card">
      <h3>Inscripción de Participantes</h3>
      <p>Formulario para registro y envío de comprobante.</p>
      <div class="btns">
        <a class="btn primary" href="/inscripcion" target="_self">Abrir</a>
        <button class="btn copy-btn" data-path="/inscripcion">Copiar enlace</button>
       <!-- <button class="btn qr-btn"    data-path="/inscripcion">QR</button>-->
      </div>
      <div class="small">Ruta: <code>/inscripcion</code></div>
    </div>

    <!-- Registro día del evento -->
    <div class="card">
      <h3>Registro de Ingreso</h3>
      <p>Escaneo/validación de ingreso el día de la convención.</p>
      <div class="btns">
        <a class="btn primary" href="/ingreso" target="_self">Abrir</a>
        <button class="btn copy-btn" data-path="/ingreso">Copiar enlace</button>
     <!--   <button class="btn qr-btn"    data-path="/ingreso">QR</button> -->
      </div>
      <div class="small">Ruta: <code>/ingreso</code></div>
    </div>

    <!-- Tablero -->
    <div class="card">
      <h3>Tablero de Control</h3>
      <p>Conteos en tiempo real: pagos e ingresos.</p>
      <div class="btns">
        <a class="btn primary" href="/tablero" target="_self">Abrir</a>
        <button class="btn copy-btn" data-path="/tablero">Copiar enlace</button>
       <!-- <button class="btn qr-btn"    data-path="/tablero">QR</button>-->
      </div>
      <div class="small">Ruta: <code>/tablero</code></div>
    </div>
  </div>

  <!-- Modal QR -->
  <dialog id="qrDialog">
    <div class="modal">
      <h4>QR de acceso</h4>
      <div id="qrBox" class="qrbox"></div>
      <div class="actions">
        <button class="btn" onclick="document.getElementById('qrDialog').close()">Cerrar</button>
      </div>
    </div>
  </dialog>

  <!-- Librería ligera para generar QR en el navegador -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script>
    function absolute(path){ return location.origin + path; }

    document.addEventListener('click', async (e) => {
      const copy = e.target.closest('.copy-btn');
      const qr   = e.target.closest('.qr-btn');

      // Copiar enlace
      if (copy) {
        const path = copy.dataset.path || '/';
        const url = absolute(path);
        try { await navigator.clipboard.writeText(url); alert('Enlace copiado:\n' + url); }
        catch { prompt('Copia el enlace:', url); }
      }

      // Mostrar QR
      if (qr) {
        const path = qr.dataset.path || '/';
        const url  = absolute(path);

        const box = document.getElementById('qrBox');
        box.innerHTML = ''; // limpia previo
        QRCode.toCanvas(url, { width: 280, margin: 2 }, (err, canvas) => {
          if (err) { alert('No se pudo generar el QR'); return; }
          box.appendChild(canvas);
          document.getElementById('qrDialog').showModal();
        });
      }
    });
  </script>
</body>
</html>

